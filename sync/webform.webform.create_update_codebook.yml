uuid: c60d1f99-f161-4251-9346-8bb564aab744
langcode: en
status: open
dependencies:
  module:
    - ldbase_handlers
open: null
close: null
weight: 0
uid: 1
template: false
archive: false
id: create_update_codebook
title: 'Create/Update Codebook'
description: 'A form for creating or updating LDbase Codebook objects.'
category: 'LDbase Create/Update Forms'
elements: "codebook_header_text:\n  '#type': webform_markup\n  '#markup': 'In this form, you can provide the metadata for your codebook. All information entered here will be searchable within LDbase and on the web, even if you decide not to share the actual codebook. Not all fields are required, but it will help other users find your codebook if you fill out everything. Codebooks can be a helpful tool for other users to better understand your data.'\npassed_id:\n  '#type': select\n  '#title': 'Attach Codebook to'\n  '#options': project_tree_content\n  '#required': true\n  '#states':\n    disabled:\n      ':input[name=\"node_id\"]':\n        empty: true\n    invisible:\n      ':input[name=\"node_id\"]':\n        empty: true\n  '#states_clear': false\ntitle:\n  '#type': textfield\n  '#title': 'Codebook Name'\n  '#description': 'Enter the name you want this codebook to be identified as. It is helpful to name it similar to the data set it refers to.'\n  '#description_display': before\n  '#placeholder': 'For Example: Wave 1 Student Achievement Codebook for Motivate Project'\n  '#required': true\ndescription:\n  '#type': textarea\n  '#title': 'Codebook Description'\n  '#description': 'Provide a brief description this codebook. Include the data set it accompanies and any other specifics.'\n  '#description_display': before\n  '#placeholder': 'For Example: This is the codebook accompanying the full data set of Wave 1 Student Achievement. It includes descriptions of variables, transformations, and levels.'\n  '#required': true\nauthors:\n  '#type': entity_autocomplete\n  '#title': 'Codebook Author(s)'\n  '#multiple': true\n  '#description': 'Enter the full names of the people who should get credit for this codebook and be part of the citation. This may or may not include named personnel on funded grants, but likely includes those who put the codebook together.'\n  '#help': 'Personnel that might receive credit are postdocs, undergraduate or graduate students, data management staff, or your methodologist.'\n  '#description_display': before\n  '#placeholder': 'For Example: Cody Codes'\n  '#required': true\n  '#multiple__sorting': false\n  '#multiple__add_more_input': false\n  '#multiple__add_more_button_label': 'Add another Codebook Author'\n  '#attributes':\n    class:\n      - input-comma-check\n  '#target_type': node\n  '#selection_handler': 'default:node'\n  '#selection_settings':\n    target_bundles:\n      person: person\n    auto_create: 1\n    auto_create_bundle: person\ndocument_uploaded_or_externally_linked:\n  '#type': radios\n  '#title': '<strong>Codebook Uploaded or Externally Linked</strong>'\n  '#description': 'If your codebook is already stored online, select external resource and provide the online location information. If you are storing your codebook on LDbase select upload and follow the steps.'\n  '#description_display': before\n  '#options':\n    upload: 'Codebook will be uploaded'\n    external: 'Codebook is an external resource'\n  '#required': true\nexternal_resource:\n  '#type': textfield\n  '#title': 'External URL for this Codebook'\n  '#description': 'Add the URL for this codebook. Please include the protocol for the URL (e.g., https://)'\n  '#description_display': before\n  '#placeholder': 'For Example: https://www.nlsinfo.org/investigator/pages/search'\n  '#pattern': '^(http:\\/\\/|https:\\/\\/)(www\\.)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$'\n  '#pattern_error': 'You must enter a valid URL beginning with \"http://\" or \"https://\"'\n  '#states':\n    visible:\n      ':input[name=\"document_uploaded_or_externally_linked\"]':\n        value: external\n    required:\n      ':input[name=\"document_uploaded_or_externally_linked\"]':\n        value: external\n  '#attributes':\n    class:\n      - codebook-url-text-input\npublication_info:\n  '#type': webform_custom_composite\n  '#title': 'Publication Information'\n  '#description': 'If you already published the codebook somewhere, please provide information on when and where this was first published. These fields will help LDbase generate the citation for your codebook.'\n  '#description_display': before\n  '#states':\n    visible:\n      ':input[name=\"document_uploaded_or_externally_linked\"]':\n        value: external\n  '#states_clear': false\n  '#multiple__sorting': false\n  '#multiple__add_more_input': false\n  '#multiple__add_more_button_label': 'Add another Publication Information'\n  '#element':\n    publication_month:\n      '#type': select\n      '#options': months\n      '#title': 'Publication Month'\n    publication_year:\n      '#type': select\n      '#options': years\n      '#title': 'Publication Year'\n    publication_source:\n      '#type': textfield\n      '#title': 'Publication Source'\n      '#placeholder': 'For Example: https://www.nlsinfo.org'\n      '#description': 'Provide the URL where the codebook was published online. Note that this points to a general hosting site, such as LDbase, ICPSR, etc., not specifically to your codebook.'\n      '#pattern': '^(http:\\/\\/|https:\\/\\/)(www\\.)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$'\n      '#pattern_error': 'You must enter a valid URL beginning with \"http://\" or \"https://\"'\n      '#attributes':\n        class:\n          - codebook-url-text-input\n    publication_target_id:\n      '#type': hidden\n    publication_target_revision_id:\n      '#type': hidden\ndocument_file:\n  '#type': managed_file\n  '#title': File\n  '#states':\n    visible:\n      ':input[name=\"document_uploaded_or_externally_linked\"]':\n        value: upload\n    required:\n      ':input[name=\"document_uploaded_or_externally_linked\"]':\n        value: upload\n  '#file_placeholder': 'Upload your file here. You can only upload 1 file per form.'\n  '#file_extensions': 'gif jpg png bmp eps tif pict psd txt rtf html odf pdf doc docx ppt pptx csv xls xlsx xml avi mov mp3 ogg wav bz2 dmg gz jar rar rmd sit svg tar zip'\n  '#sanitize': true\nembargoed:\n  '#type': checkbox\n  '#title': 'Restrict public access to file?'\n  '#description': 'Checking this box will make the submitted files unavailable to the public, but they will still be able to see your metadata'\n  '#states':\n    visible:\n      ':input[name=\"document_uploaded_or_externally_linked\"]':\n        value: upload\n  '#states_clear': false\nembargo_expiry:\n  '#type': date\n  '#title': 'Access restriction expiration date'\n  '#description': 'Schedule a date for when the submitted file for this codebook should be made available to the public, or leave blank to restrict access to files indefinitely.'\n  '#states':\n    visible:\n      ':input[name=\"embargoed\"]':\n        checked: true\n  '#states_clear': false\n  '#date_date_min': '[webform_submission:created:html_date]'\n  '#datepicker': true\n  '#datepicker_button': true\nembargo_exempt_users:\n  '#type': entity_autocomplete\n  '#title': 'Access restriction exempt users'\n  '#multiple': true\n  '#description': 'Enter LDbase users that are exempt from the access restriction.'\n  '#description_display': before\n  '#states':\n    visible:\n      ':input[name=\"embargoed\"]':\n        checked: true\n  '#states_clear': false\n  '#multiple__sorting': false\n  '#multiple__add_more_input': false\n  '#multiple__add_more_button_label': 'Add another exempt user'\n  '#attributes':\n    class:\n      - input-comma-check\n  '#target_type': user\n  '#selection_handler': views\n  '#selection_settings':\n    view:\n      view_name: user_reference_autocomplete\n      display_name: entity_reference_1\n      arguments: {  }\nlicense:\n  '#type': webform_select_other\n  '#title': License\n  '#description': 'Choose the license type for your codebook. We recommend the CC-by license that will require everyone who uses your codebook to cite it. There are other CC licenses that you can also choose. For full information about CC licenses, read about it in the best practices page. If you opt to make your codebook public without a license, other users may use and reuse it without citing you and your team. If you have a different license in mind, select the other option, and enter the type in the box.'\n  '#help': 'Select the license you would like for this codebook.'\n  '#description_display': before\n  '#options': document_licenses\ndoi:\n  '#type': textfield\n  '#title': 'Codebook DOI'\n  '#multiple': true\n  '#description': 'If you already have a DOI for your codebook enter it here. If you don&rsquo;t have a DOI yet, you will be provided the option to generate one when submitting this form.'\n  '#description_display': before\n  '#placeholder': 'For Example: 10.1037/a0028240'\n  '#pattern': '\\b(10[.][0-9]{4,}(?:[.][0-9]+)*\\/(?:(?![\"&\\''<>])[[:graph:]])+)\\b'\n  '#pattern_error': 'Enter the DOI only.  It will begin with \"10.\"'\n  '#multiple__sorting': false\n  '#multiple__add_more_input': false\n  '#multiple__add_more_button_label': 'Add another Codebook DOI'\nnode_id:\n  '#type': hidden\n  '#title': node_id\npublished_flag:\n  '#type': checkbox\n  '#title': 'Make this information publicly available?'\n  '#description': 'If you uncheck this box, users will not be able to view or search for any metadata (i.e. information) about your codebook. You can uncheck the box to save the metadata as a draft and later check the box to share it publicly. If you have chosen to embargo your files, the files will not be publicly available, but your metadata will be.'\n  '#default_value': true\nactions:\n  '#type': webform_actions\n  '#title': 'Submit button(s)'\n  '#submit__label': Save"
css: "html {\r\n  scroll-padding-top: 180px; \r\n}"
javascript: "(function($, Drupal, drupalSettings){\r\n  'use strict';\r\n  \r\n  Drupal.behaviors.ldbaseCodebook = {\r\n    attach: function (context, settings) {\r\n      $(context).find('.codebook-url-text-input').on('click', function() {\r\n        var val = $(this).val();\r\n        if (val.length == 0) {\r\n          $(this).val(\"https://\");\r\n        }\r\n      });\r\n      \r\n      $(context).find('.input-comma-check').on('keyup', function(e) {\r\n        if (e.which == 188) {\r\n          alert('You added a comma. Please only enter one item per line.  \\nAdd additional lines if needed.');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n})(jQuery, Drupal, drupalSettings);"
settings:
  ajax: false
  ajax_scroll_top: ''
  ajax_progress_type: ''
  ajax_effect: ''
  ajax_speed: null
  page: true
  page_submit_path: ''
  page_confirm_path: ''
  page_admin_theme: false
  form_title: source_entity_webform
  form_submit_once: false
  form_exception_message: ''
  form_open_message: ''
  form_close_message: ''
  form_previous_submissions: true
  form_confidential: false
  form_confidential_message: ''
  form_remote_addr: true
  form_convert_anonymous: false
  form_prepopulate: false
  form_prepopulate_source_entity: false
  form_prepopulate_source_entity_required: false
  form_prepopulate_source_entity_type: ''
  form_reset: false
  form_disable_autocomplete: false
  form_novalidate: true
  form_disable_inline_errors: false
  form_required: true
  form_unsaved: true
  form_disable_back: false
  form_submit_back: false
  form_autofocus: false
  form_details_toggle: false
  form_access_denied: default
  form_access_denied_title: ''
  form_access_denied_message: ''
  form_access_denied_attributes: {  }
  form_file_limit: ''
  submission_label: ''
  submission_log: false
  submission_views: {  }
  submission_views_replace: {  }
  submission_user_columns: {  }
  submission_user_duplicate: false
  submission_access_denied: default
  submission_access_denied_title: ''
  submission_access_denied_message: ''
  submission_access_denied_attributes: {  }
  submission_exception_message: ''
  submission_locked_message: ''
  submission_excluded_elements: {  }
  submission_exclude_empty: false
  submission_exclude_empty_checkbox: false
  previous_submission_message: ''
  previous_submissions_message: ''
  autofill: false
  autofill_message: ''
  autofill_excluded_elements: {  }
  wizard_progress_bar: false
  wizard_progress_pages: false
  wizard_progress_percentage: false
  wizard_progress_link: false
  wizard_progress_states: false
  wizard_start_label: ''
  wizard_preview_link: false
  wizard_confirmation: true
  wizard_confirmation_label: ''
  wizard_track: ''
  preview: 0
  preview_label: ''
  preview_title: ''
  preview_message: ''
  preview_attributes: {  }
  preview_excluded_elements: {  }
  preview_exclude_empty: true
  preview_exclude_empty_checkbox: false
  draft: none
  draft_multiple: false
  draft_auto_save: false
  draft_saved_message: ''
  draft_loaded_message: ''
  draft_pending_single_message: ''
  draft_pending_multiple_message: ''
  confirmation_type: page
  confirmation_title: ''
  confirmation_message: ''
  confirmation_url: ''
  confirmation_attributes: {  }
  confirmation_back: true
  confirmation_back_label: ''
  confirmation_back_attributes: {  }
  confirmation_exclude_query: false
  confirmation_exclude_token: false
  confirmation_update: false
  limit_total: null
  limit_total_interval: null
  limit_total_message: ''
  limit_total_unique: false
  limit_user: null
  limit_user_interval: null
  limit_user_message: ''
  limit_user_unique: false
  entity_limit_total: null
  entity_limit_total_interval: null
  entity_limit_user: null
  entity_limit_user_interval: null
  purge: none
  purge_days: null
  results_disabled: true
  results_disabled_ignore: true
  token_update: false
  token_view: false
  results_customize: false
  page_theme_name: ''
  share: false
  share_node: false
  share_theme_name: ''
  share_title: true
  share_page_body_attributes: {  }
  wizard_auto_forward: true
  wizard_auto_forward_hide_next_button: false
  wizard_keyboard: true
  wizard_prev_button_label: ''
  wizard_next_button_label: ''
  wizard_toggle: true
  wizard_toggle_show_label: ''
  wizard_toggle_hide_label: ''
  serial_disabled: false
access:
  create:
    roles:
      - anonymous
      - authenticated
    users: {  }
    permissions: {  }
  view_any:
    roles: {  }
    users: {  }
    permissions: {  }
  update_any:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_any:
    roles: {  }
    users: {  }
    permissions: {  }
  purge_any:
    roles: {  }
    users: {  }
    permissions: {  }
  view_own:
    roles: {  }
    users: {  }
    permissions: {  }
  update_own:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_own:
    roles: {  }
    users: {  }
    permissions: {  }
  administer:
    roles: {  }
    users: {  }
    permissions: {  }
  test:
    roles: {  }
    users: {  }
    permissions: {  }
  configuration:
    roles: {  }
    users: {  }
    permissions: {  }
handlers:
  debug:
    id: debug
    label: Debug
    notes: ''
    handler_id: debug
    status: false
    conditions: {  }
    weight: 0
    settings:
      format: yaml
      submission: false
  ldbase_document:
    id: document_from_webform
    label: 'LDbase Document'
    notes: ''
    handler_id: ldbase_document
    status: true
    conditions: {  }
    weight: 0
    settings: {  }
variants: {  }
